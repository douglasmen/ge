<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:tr="http://myfaces.apache.org/trinidad"
	xmlns:plcf="http://www.powerlogic.com.br/plcf"
	xmlns:c="http://java.sun.com/jstl/core">

	<c:if test="${not empty requestScope['BPM_PROCESS_DEFINITION'] and not empty requestScope['idDefinicaoProcesso']}">
		<tr:panelGroupLayout rendered="#{not empty plcEntidade.transicoes}">
			
			<plcf:escondido id="proximaTransicao" rendered="#{plcEntidade !=null}" value="#{plcEntidade.proximaTransicao}" />
			
			<div id="plc-menu-bpm" class="plc-menu-bpm-pulldown">
				<ul>
					<li>
						<a href="#" class="plc-botao">
							<plcf:titulo tituloChave="jcompany.menu.bpm"/>
						</a>
						<ul>
							<tr:iterator value="#{plcEntidade.transicoes}" var="transicao">
							<li>
								<a href="#">
									<plcf:botaoAcao acao="sinalizaTransicao"
										partialSubmit="#{requestScope.ajaxUsa}" text="#{transicao.nome}" styleClass="botao_menu ui-state-default plc-botao"
										blocking="true"
										onclick="jQuery(document.getElementById('corpo:formulario:proximaTransicao')).attr('value', '#{transicao.id}'); "
										rendered="#{requestScope.exibeTransicoesBPM[transicao.id] != 'N'}" />
								</a>
							</li>
							</tr:iterator>
						</ul>
					</li>
				</ul>
			</div>
			
			<script type="text/javascript">
			//<![CDATA[
			/* Cria o Menu Pulldown */
			jQuery(function(){
				jQuery("div.plc-menu-bpm-pulldown li").hover(function(){
					jQuery('ul:first',this).css('visibility', 'visible');
				}, function(){    
					jQuery('ul:first',this).css('visibility', 'hidden');
				});
				if (ExpYes){
					/* erro no internet explorer 7, as abas do mestredetalhe estao sobrepondo o menu */
					jQuery("div#plc-menu-bpm > ul").css('z-index', 1000);
				}
			});
			//]]>
			</script>
			
		</tr:panelGroupLayout>		
	</c:if>
</ui:composition>